<?xml version="1.0" encoding="UTF-8"?>

<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             typeLanguage="http://www.w3.org/2001/XMLSchema"
             expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/test"
             xmlns:activiti="http://activiti.org/bpmn">

    <process id="my-process">

        <startEvent id="start"/>
        <sequenceFlow id="flow1" sourceRef="start" targetRef="someTask"/>

        <userTask id="someTask" name="Activiti is awesome!"/>
        <sequenceFlow id="flow2" sourceRef="someTask" targetRef="syncScript"/>

        <scriptTask id="syncScript" name="More stuff" scriptFormat="groovy">
            <script>
                org.slf4j.MDC.put("MDCKEY", var1)
                org.slf4j.LoggerFactory.getLogger("syncScript").info("sync task log");
            </script>
        </scriptTask>
        <sequenceFlow id="flow3" sourceRef="syncScript" targetRef="asyncScript"/>


        <scriptTask id="asyncScript" name="More stuff" scriptFormat="groovy" activiti:async="true">
            <script>
                org.slf4j.LoggerFactory.getLogger("asynScript").info("async task log");
            </script>
        </scriptTask>

        <sequenceFlow id="flow4" sourceRef="asyncScript" targetRef="end"/>

        <endEvent id="end"/>

    </process>

</definitions>